<!DOCTYPE html>
<html lang="en">
  <!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/index.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:32:35 GMT -->
  <head>
    <meta charset="utf-8" />
    <title>Dashboard</title>
    <meta http-equiv="x-ua-compatible" content="ie=edge" />
    <meta name="description" content="" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <meta property="og:title" content="" />
    <meta property="og:type" content="" />
    <meta property="og:url" content="" />
    <meta property="og:image" content="" />
    <style>
      /* Basic Reset */
* {
    box-sizing: border-box;
}

form {
    max-width: 800px; /* Limit the width of the form */
    margin: auto; /* Center the form */
}

/* Style for labels */
.form-label {
    font-weight: bold; /* Make labels bold */
}

/* Style for input fields and selects */
.form-control, .form-select {
    width: 100%; /* Make inputs full width */
    padding: 10px; /* Add padding for better touch area */
    font-size: 1.1rem; /* Increase font size for readability */
}

/* Style for textarea */
textarea.form-control {
    resize: vertical; /* Allow vertical resizing */
}

/* Style for buttons */
.btn {
    padding: 10px 20px; /* Increase button padding */
    font-size: 1.1rem; /* Increase button font size */
}

/* Ensure rows are well spaced */
.row {
    margin-bottom: 20px; /* Space between rows */
}

/* Text danger color */
.text-danger {
    font-size: 0.9rem; /* Slightly smaller error message font */
}

/* Card styles (if needed) */
.card {
    margin-bottom: 20px; /* Space between cards */
}

/* Input upload styles */
.input-upload {
    position: relative; /* Positioning for better control */
}
    </style>
    <!-- Favicon -->
    <link
      rel="shortcut icon"
      type="image/x-icon"
      href="assets/imgs/theme/favicon1.svg"
    />

    <!-- Template CSS -->
    <link href="assets/css/main.css" rel="stylesheet" type="text/css" />
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" />
    <style>
      /* General styling */
      body {
        font-family: Arial, sans-serif;
        background-color: #ffffff;
      }
  
      .card-body {
        max-width: 500px;
        margin: 20px auto;
        padding: 20px;
        border: 1px solid #ddd;
        border-radius: 8px;
      }
  
      /* Crop modal styling */
      #cropModal {
        display: none;
        position: fixed;
        top: 50%;
        left: 50%;
        transform: translate(-50%, -50%);
        background-color: white;
        padding: 20px;
        border: 1px solid #ccc;
        border-radius: 8px;
        z-index: 10;
        box-shadow: 0px 0px 10px rgba(0, 0, 0, 0.2);
      }
  
      #croppingImage {
        max-width: 100%;
      }
  
      .overlay {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background-color: rgba(0, 0, 0, 0.5);
        z-index: 5;
      }
    </style>
    <style>
      /* Styling for the table */
      table {
        width: 100%;
        border-collapse: collapse;
        border: 1px solid #ddd;
      }
      table,
      th,
      td {
        border: 1px solid #ddd;
      }
      th,
      td {
        padding: 12px;
        text-align: left;
      }
      th {
        background-color: #f8f9fa;
        font-weight: bold;
      }
      tr:nth-child(even) {
        background-color: #f2f2f2;
      }
      /* Styling for the title */
      h2.content-title {
        font-size: 24px;
        font-weight: bold;
      }
    </style>
     <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.css" />
     <style>
      #cropModal {
          display: none; /* Initially hidden */
          position: fixed; /* Fixed positioning for modal */
          top: 50%; /* Center vertically */
          left: 50%; /* Center horizontally */
          transform: translate(-50%, -50%); /* Adjust for exact centering */
          background: white; /* White background for the modal */
          padding: 20px; /* Padding around content */
          z-index: 10000; /* High z-index to ensure it's on top */
          box-shadow: 0 4px 8px rgba(0, 0, 0, 0.1); /* Subtle shadow for depth */
      }
  
      #croppingImage {
          max-width: 100%; /* Responsive image */
          display: block; /* Ensure it's a block element */
      }
  
      #cropButton {
          display: inline-block; /* Inline-block for button styling */
          padding: 10px 20px; /* Padding for button */
          background-color: #007bff; /* Primary button color */
          color: white; /* Button text color */
          border: none; /* No border */
          border-radius: 5px; /* Rounded corners */
          cursor: pointer; /* Pointer on hover */
          margin-top: 10px; /* Space above the button */
      }
  
      #cropButton:hover {
          background-color: #0056b3; /* Darker shade on hover */
      }
  
      #imagePreview img {
          width: 100px; /* Fixed width for preview images */
          margin-right: 10px; /* Space between images */
          cursor: pointer; /* Pointer on hover */
      }
  </style>
  
  
  </head>

  <body>
    <div class="screen-overlay"></div>
    <aside class="navbar-aside" id="offcanvas_aside">
      <div class="aside-top">
        <a href="dashboard" class="brand-wrap">
          <img
            src="assets/imgs/theme/logo1.svg"
            class="logo"
            alt="Evara Dashboard"
            style="width: 50px; height: 111px"
          />
        </a>

        <div>
          <button class="btn btn-icon btn-aside-minimize">
            <i class="text-muted material-icons md-menu_open"></i>
          </button>
        </div>
      </div>
      <nav>
        <ul class="menu-aside">
          <li class="menu-item active">
            <a class="menu-link" href="dashboard">
              <i class="icon material-icons md-home"></i>
              <span class="text">Dashboard</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="productsList">
              <i class="icon material-icons md-shopping_bag"></i>
              <span class="text">Products</span>
            </a>
            <!-- <a href="productsList.ejs">Product List</a> -->
          </li>
          <!-- <li class="menu-item has-submenu">
            <a class="menu-link" href="page-orders-1.html">
              <i class="icon material-icons md-shopping_cart"></i>
              <span class="text">Orders</span>
            </a>
            <div class="submenu">
              <a href="page-orders-1.html">Order list 1</a>
              <a href="page-orders-2.html">Order list 2</a>
              <a href="page-orders-detail.html">Order detail</a>
            </div>
          </li> -->

          <!-- <li class="menu-item has-submenu">
            <a class="menu-link" href="page-form-product-1.html">
              <i class="icon material-icons md-add_box"></i>
              <span class="text">Add product</span>
            </a>
            <div class="submenu">
              <a href="page-form-product-1.html">Add product 1</a>
              <a href="page-form-product-2.html">Add product 2</a>
              <a href="page-form-product-3.html">Add product 3</a>
              <a href="page-form-product-4.html">Add product 4</a>
            </div>
          </li> -->
          <li class="menu-item">
            <a class="menu-link" href="userList">
              <i class="icon material-icons md-person"></i>
              <span class="text">Users</span>
            </a>
          </li>

          <!-- <li class="menu-item">
            <a class="menu-link" href="page-reviews.html">
              <i class="icon material-icons md-comment"></i>
              <span class="text">Reviews</span>
            </a>
          </li> -->
          <li class="menu-item">
            <a class="menu-link" href="brand">
              <i class="icon material-icons md-stars"></i>
              <span class="text">Brands</span>
            </a>
          </li>
          <li class="menu-item">
            <a class="menu-link" href="catagory">
              <i class="icon material-icons md-stars"></i>
              <span class="text">Catagory</span>
            </a>
          </li>
        </ul>
      </nav>
    </aside>
    <main class="main-wrap">
      <header class="main-header navbar">
        <div class="col-search">
          <form class="searchform">
            <div class="input-group">
              <input
                list="search_terms"
                type="text"
                class="form-control"
                placeholder="Search term"
              />
              <button class="btn btn-light bg" type="button">
                <i class="material-icons md-search"></i>
              </button>
            </div>
            <datalist id="search_terms">
              <option value="Products"></option>
              <option value="New orders"></option>
              <option value="Apple iphone"></option>
              <option value="Ahmed Hassan"></option>
            </datalist>
          </form>
        </div>
        <div class="col-nav">
          <button
            class="btn btn-icon btn-mobile me-auto"
            data-trigger="#offcanvas_aside"
          >
            <i class="material-icons md-apps"></i>
          </button>
          <ul class="nav">
            <li class="nav-item">
              <a class="nav-link btn-icon" href="#">
                <i class="material-icons md-notifications animation-shake"></i>
                <span class="badge rounded-pill">3</span>
              </a>
            </li>
            <li class="nav-item">
              <a class="nav-link btn-icon darkmode" href="#">
                <i class="material-icons md-nights_stay"></i>
              </a>
            </li>
            <li class="nav-item">
              <a href="#" class="requestfullscreen nav-link btn-icon"
                ><i class="material-icons md-cast"></i
              ></a>
            </li>
            <li class="dropdown nav-item">
              <a
                class="dropdown-toggle"
                data-bs-toggle="dropdown"
                href="#"
                id="dropdownLanguage"
                aria-expanded="false"
                ><i class="material-icons md-public"></i
              ></a>
              <div
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="dropdownLanguage"
              >
                <a class="dropdown-item text-brand" href="#"
                  ><img
                    src="assets/imgs/theme/flag-us.png"
                    alt="English"
                  />English</a
                >
                <a class="dropdown-item" href="#"
                  ><img
                    src="assets/imgs/theme/flag-fr.png"
                    alt="Français"
                  />Français</a
                >
                <a class="dropdown-item" href="#"
                  ><img
                    src="assets/imgs/theme/flag-jp.png"
                    alt="Français"
                  />日本語</a
                >
                <a class="dropdown-item" href="#"
                  ><img
                    src="assets/imgs/theme/flag-cn.png"
                    alt="Français"
                  />中国人</a
                >
              </div>
            </li>
            <li class="dropdown nav-item">
              <a
                class="dropdown-toggle"
                data-bs-toggle="dropdown"
                href="#"
                id="dropdownAccount"
                aria-expanded="false"
              >
                <img
                  class="img-xs rounded-circle"
                  src="assets/imgs/people/avatar2.jpg"
                  alt="User"
              /></a>
              <div
                class="dropdown-menu dropdown-menu-end"
                aria-labelledby="dropdownAccount"
              >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-perm_identity"></i>Edit
                  Profile</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-settings"></i>Account Settings</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-account_balance_wallet"></i
                  >Wallet</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-receipt"></i>Billing</a
                >
                <a class="dropdown-item" href="#"
                  ><i class="material-icons md-help_outline"></i>Help center</a
                >
                <div class="dropdown-divider"></div>
                <a class="dropdown-item text-danger" href="#"
                  ><i class="material-icons md-exit_to_app"></i>Logout</a
                >
              </div>
            </li>
          </ul>
        </div>
      </header>
      <section class="content-main">
        <div class="row">
          <div class="col-9">
            <div class="content-header">
              <h2 class="content-title">Add New Product</h2>
              <div>
                <!-- <button
                  class="btn btn-light rounded font-sm mr-5 text-body hover-up"
                >
                  Save to draft
                </button>
                <button class="btn btn-md rounded font-sm hover-up">
                  Publish
                </button> -->
              </div>
            </div>
          </div>
          <div class="col-lg-6">
            <div class="card mb-4" style="width: 695px;">
              <div class="card-header">
                <h4>Basic</h4>
              </div>
             
              
              <form id="productForm" name="productForm" method="post" action="/admin/addProduct" enctype="multipart/form-data" onsubmit="return validateForm()">
                <div class="mb-4">
                  <label for="product_name" class="form-label">Product title</label>
                  <input type="text" placeholder="Type here" name="product_title" class="form-control" id="product_name" />
                  <span id="productTitleError" class="text-danger"></span>
                </div>
              
                <div class="mb-4">
                  <label class="form-label">Full description</label>
                  <textarea placeholder="Type here" class="form-control" rows="4" name="full_description"></textarea>
                  <span id="descriptionError" class="text-danger"></span>
                </div>
              
                <div class="row mb-4">
                  <div class="col-lg-6">
                    <label class="form-label">Price</label>
                    <input placeholder="$" type="number" class="form-control" name="price"  />
                    <span id="priceError" class="text-danger"></span>
                  </div>
              
                  <div class="col-lg-6">
                    <label class="form-label">Stock</label>
                    <input placeholder="Stock" type="text" class="form-control" name="stock"  />
                    <span id="stockError" class="text-danger"></span>
                  </div>
                </div>
              
                <div class="row mb-4">
                  <div class="col-lg-6">
                    <label class="form-label">Category</label>
                    <select class="form-select" name="category">
                      <% category.forEach(category => { %>
                        <option value="<%= category._id %>"><%= category.name %></option>
                      <% }) %>
                    </select>
                    <span id="categoryError" class="text-danger"></span>
                  </div>
              
                  <div class="col-lg-6">
                    <label class="form-label">Brand</label>
                    <select class="form-select" name="brand">
                      <% brand.forEach(brand => { %>
                        <option value="<%= brand._id %>"><%= brand.name %></option>
                      <% }) %>
                    </select>
                    <span id="brandError" class="text-danger"></span>
                  </div>
                </div>
              
                <div class="mb-4">
                  <div class="input-upload">
                    <input class="form-control" id="product_image" type="file" name="image_url" accept="image/*" multiple onchange="handleFiles(event)" />
                    <span id="imageError" class="text-danger"></span>
                  </div>
                  <div id="imagePreview" class="mt-3"></div>
                </div>
              
                <button type="submit" class="btn btn-primary">Add Product</button>
              
                <div id="cropModal" style="display:none;">
                  <img id="croppingImage" />
                  <button type="button" id="cropButton" onclick="cropImage()">Crop Image</button>
                </div>
                <div class="overlay" id="overlay" style="display:none;"></div>
              </form>
              
      </section>
      <!-- content-main end// -->
      <footer class="main-footer font-xs">
        <div class="row pb-30 pt-15">
          <div class="col-sm-6">
            <script>
              document.write(new Date().getFullYear());
            </script>
            ©, Evara - HTML Ecommerce Template .
          </div>
          <div class="col-sm-6">
            <div class="text-sm-end">All rights reserved</div>
          </div>
        </div>
      </footer>
    </main>
    <!-- script of image -->
     <!-- <script>
      document.getElementById("productForm").addEventListener("submit", async function (e) {
    e.preventDefault();

    const form = new FormData();
    const files = document.getElementById("product_image").files;
    
    // Append each selected file to the FormData object
    for (let i = 0; i < files.length; i++) {
      form.append("product_image", files[i]);
    }

    // Append other form fields as needed
    form.append("product_title", "Example Title");
    form.append("full_description", "Example Description");
    // Add other fields...

    try {
      const response = await fetch("/addProduct", {
        method: "POST",
        body: form,
      });

      const result = await response.json();
      console.log(result);
    } catch (error) {
      console.error("Error:", error);
    }
  });
     </script> -->
     <script src="https://cdnjs.cloudflare.com/ajax/libs/cropperjs/1.5.12/cropper.min.js"></script>
     <script>
       let cropper;
       let currentFile;
       let currentImgElement;
       let filesArray = [];
       let croppedFileIndex;
   
       function handleFiles(event) {
         const imagePreviewContainer = document.getElementById("imagePreview");
         imagePreviewContainer.innerHTML = "";
   
         const files = event.target.files;
         filesArray = Array.from(files);
   
         filesArray.forEach((file, index) => {
           const reader = new FileReader();
   
           reader.onload = (e) => {
             currentFile = file;
             const img = document.createElement("img");
             img.src = e.target.result;
             img.style.width = "100px";
             img.style.marginRight = "10px";
             img.style.cursor = "pointer";
             img.onclick = () => openCropper(e.target.result, img, index);
             imagePreviewContainer.appendChild(img);
           };
   
           reader.readAsDataURL(file);
         });
       }
   
       function openCropper(imageSrc, imgElement, index) {
         const cropModal = document.getElementById("cropModal");
         const croppingImage = document.getElementById("croppingImage");
         const overlay = document.getElementById("overlay");
   
         currentImgElement = imgElement;
         croppedFileIndex = index;
   
         croppingImage.src = imageSrc;
         cropModal.style.display = "block";
         overlay.style.display = "block";
   
         if (cropper) {
           cropper.destroy();
         }
   
         cropper = new Cropper(croppingImage, {
           viewMode: 1,
           dragMode: 'move',
           autoCropArea: 0.8,
           responsive: true,
         });
       }
   
       function cropImage() {
         const canvas = cropper.getCroppedCanvas();
   
         canvas.toBlob((blob) => {
           const croppedFile = new File([blob], currentFile.name, { type: 'image/png' });
   
           filesArray[croppedFileIndex] = croppedFile;
   
           const dataTransfer = new DataTransfer();
           filesArray.forEach((file) => {
             dataTransfer.items.add(file);
           });
   
           const fileInput = document.getElementById('product_image');
           fileInput.files = dataTransfer.files;
   
           currentImgElement.src = URL.createObjectURL(croppedFile);
   
           document.getElementById("cropModal").style.display = "none";
           document.getElementById("overlay").style.display = "none";
   
           cropper.destroy();
           cropper = null;
         }, 'image/png');
       }
     </script>
     <script src="https://cdn.jsdelivr.net/npm/sweetalert2@11"></script>
     <!-- <script>
      <% if (error) { %>
        Swal.fire({
          icon: 'error',
          title: 'Oops...',
          text: '<%= error %>',
          confirmButtonColor: '#d33'
        });
      <% } %>
    
      <% if (success) { %>
        Swal.fire({
          icon: 'success',
          title: 'Success',
          text: '<%= success %>',
          confirmButtonColor: '#3085d6'
        });
      <% } %>
    </script> -->
   <script>
    function validateForm() {
      document.getElementById('productTitleError').innerHTML = '';
      document.getElementById('priceError').innerHTML = '';
      document.getElementById('categoryError').innerHTML = '';
      document.getElementById('brandError').innerHTML = '';
      document.getElementById('stockError').innerHTML = '';
      document.getElementById('imageError').innerHTML = '';
  
      let isValid = true;
  
      const productTitle = document.forms["productForm"]["product_title"].value;
      const price = document.forms["productForm"]["price"].value;
      const category = document.forms["productForm"]["category"].value;
      const brand = document.forms["productForm"]["brand"].value;
      const stock = document.forms["productForm"]["stock"].value;
      const image = document.forms["productForm"]["image_url"].files.length;
  
      if (!productTitle) {
        document.getElementById('productTitleError').innerHTML = 'Product title is required.';
        isValid = false;
      }
  
      if (!price || price <= 0) {
        document.getElementById('priceError').innerHTML = 'Please enter a valid price.';
        isValid = false;
      }
  
      if (!category) {
        document.getElementById('categoryError').innerHTML = 'Please select a category.';
        isValid = false;
      }
  
      if (!brand) {
        document.getElementById('brandError').innerHTML = 'Please select a brand.';
        isValid = false;
      }
  
      if (!stock || stock <= 0) {
        document.getElementById('stockError').innerHTML = 'Please enter a valid stock quantity.';
        isValid = false;
      }
  
      if (image === 0) {
        document.getElementById('imageError').innerHTML = 'Please upload an image.';
        isValid = false;
      }
  
      return isValid;
    }
  </script>
    <script src="assets/js/vendors/jquery-3.6.0.min.js"></script>
    <script src="assets/js/vendors/bootstrap.bundle.min.js"></script>
    <script src="assets/js/vendors/select2.min.js"></script>
    <script src="assets/js/vendors/perfect-scrollbar.js"></script>
    <script src="assets/js/vendors/jquery.fullscreen.min.js"></script>
    <!-- Main Script -->
    <script src="assets/js/main.js" type="text/javascript"></script>
  </body>

  <!-- Mirrored from wp.alithemes.com/html/evara/evara-backend/page-form-product-1.html by HTTrack Website Copier/3.x [XR&CO'2014], Sun, 01 Aug 2021 15:33:32 GMT -->
</html>
